<!DOCTYPE html>
<html dir="ltr" lang="en-US">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<meta name="author" content="SemiColonWeb" />
   <meta charset="utf-8">
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

	<!-- Stylesheets
	============================================= -->
	<link href="https://fonts.googleapis.com/css?family=Economica|Poiret+One" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" href="css/bootstrap.css" type="text/css" />
	<link rel="stylesheet" href="style.css" type="text/css" />
	<link rel="stylesheet" href="css/dark.css" type="text/css" />
	<link rel="stylesheet" href="css/font-icons.css" type="text/css" />
	<link rel="stylesheet" href="css/animate.css" type="text/css" />
	<link rel="stylesheet" href="css/magnific-popup.css" type="text/css" />
	<link rel="stylesheet" href="css/stream.css" type="text/css" />
	<link rel="stylesheet" href="jquery/jquery-ui.theme.css" type="text/css" />

	<link rel="stylesheet" href="css/responsive.css" type="text/css" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="https://fonts.googleapis.com/css?family=Bubbler+One|Just+Another+Hand|Open+Sans+Condensed:300|Poiret+One|Wire+One" rel="stylesheet">

<!--[if lt IE 9]>

	<![endif]-->

	<!-- Document Title
	============================================= -->
	<title>User Search</title>
        <style>
        body {
            display: flex;
            min-height: 100vh;
            flex-direction: column;
			font-family: Open Sans Condensed;
			font-size:18px
        }
        .btn-open {
            height: auto;
            line-height: inherit;
            padding: 15px 25px;
        }
        main {
            flex: 1 0 auto;
        }
        .container.master { padding: 50px; }
        .fa {
            display: inline-block !important;
        }
        footer {  margin-top: 0 !important; }
        #remote {
            position: relative !important;
            margin: 25px 0;
        }
        #command form input[type="texte"] {
            display: block;
            border: 2px solid rgb(74, 74, 74);
            padding: 3px 20px;
            margin-bottom: 10px;
            border-radius: 6px;

        }
        .container.formu #hangup,
        .container.formu #accept,
        .container.formu #refuse,
        .container.formu #call {
            background: transparent;
            border: none;
        }
        #addressBookDropDown {
            position: absolute;
            background: #e6e6e6;
            padding: 5px 0;
            margin-top: 5px;
            border-radius: 5px;
            z-index: 100;
        }
        #addressBookDropDown li {
            color: #4a4a4a;
            padding: 2px 15px;
        }
        #addressBookDropDown li a {
            color: lavenderblush;
        }
        #addressBookDropDown li:hover {
            background: #d6d6d6;
        }

  container {
	  width:100%!Important;
  }	
  #status {
	  font-size:16px!Important
  }
video {
 height: 100%;
  max-height: 100%;
  max-width: 100%;
  object-fit: cover;  /* no letterboxing */
  transition: opacity 1s;
  -moz-transform: scale(-1, 1);
  -ms-transform: scale(-1, 1);
  -o-transform: scale(-1, 1);
  -webkit-transform: scale(-1, 1);
  transform: scale(-1, 1);
  width: 100%;
}
  .txtMsg {
		width:260px;
		height:80px;
		border:1px solid skyblue;
		border-radius:4px;
		display:none;
		margin-bottom:10px;
		margin-top:5px;
  }
.p1 {
	  font-family:Poiret One;
	  font-size:24px;
  }
  .p11 {
	  font-family:Poiret One;
	  font-size:24px;
	  background:#CCC;
	  color: #fff;
  }
.b1 {
	 font-family:Bubbler One;
	 font-size:18px;
  }
	#chkbox {
		width:35px;height:35px;border:none
	}
/* $activeColor: #c0392b; //red */
/* $background: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/13460/dark_wall.png'); */
/* .slideOne */
.slideOne {
  width: 50px;
  height: 10px;
  background: #333;
  margin: 20px auto;
  position: relative;
  border-radius: 50px;
  box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.5), 0px 1px 0px rgba(255, 255, 255, 0.2);
}
.slideOne label {
  display: block;
  width: 16px;
  height: 16px;
  position: absolute;
  top: -3px;
  left: -3px;
  cursor: pointer;
  background: #fcfff4;
  background: -webkit-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
  background: linear-gradient(to bottom, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
  border-radius: 50px;
  box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.3);
  -webkit-transition: all 0.4s ease;
  transition: all 0.4s ease;
}
.slideOne input[type=checkbox] {
  visibility: hidden;
}
.slideOne input[type=checkbox]:checked + label {
  left: 37px;
}

/* end .slideOne */
/* .slideTwo */
.slideTwo {
  width: 80px;
  height: 30px;
  background: #333;
  margin: 20px auto;
  position: relative;
  border-radius: 50px;
  box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.5), 0px 1px 0px rgba(255, 255, 255, 0.2);
}
.slideTwo:after {
  content: '';
  position: absolute;
  top: 14px;
  left: 14px;
  height: 2px;
  width: 52px;
  background: #111;
  border-radius: 50px;
  box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.5), 0px 1px 0px rgba(255, 255, 255, 0.2);
}
.slideTwo label {
  display: block;
  width: 22px;
  height: 22px;
  cursor: pointer;
  position: absolute;
  top: 4px;
  z-index: 1;
  left: 4px;
  background: #fcfff4;
  border-radius: 50px;
  -webkit-transition: all 0.4s ease;
  transition: all 0.4s ease;
  box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.3);
  background: -webkit-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
  background: linear-gradient(to bottom, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
}
.slideTwo label:after {
  content: '';
  width: 10px;
  height: 10px;
  position: absolute;
  top: 6px;
  left: 6px;
  background: #333;
  border-radius: 50px;
  box-shadow: inset 0px 1px 1px black, 0px 1px 0px rgba(255, 255, 255, 0.9);
}
.slideTwo input[type=checkbox] {
  visibility: hidden;
}
.slideTwo input[type=checkbox]:checked + label {
  left: 54px;
}
.slideTwo input[type=checkbox]:checked + label:after {
  background: #27ae60;
  /*activeColor*/
}

/* end .slideTwo */
/* .slideThree */
.slideThree {
  width: 80px;
  height: 26px;
  background: #333;
  margin: 20px auto;
  position: relative;
  border-radius: 50px;
  box-shadow: inset 0px 1px 1px rgba(0, 0, 0, 0.5), 0px 1px 0px rgba(255, 255, 255, 0.2);
}
.slideThree:after {
  content: 'OFF';
  color: #000;
  position: absolute;
  right: 10px;
  z-index: 0;
  font: 12px/26px Arial, sans-serif;
  font-weight: bold;
  text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.15);
}
.slideThree:before {
  content: 'ON';
  color: #27ae60;
  position: absolute;
  left: 10px;
  z-index: 0;
  font: 12px/26px Arial, sans-serif;
  font-weight: bold;
}
.slideThree label {
  display: block;
  width: 34px;
  height: 20px;
  cursor: pointer;
  position: absolute;
  top: 3px;
  left: 3px;
  z-index: 1;
  background: #fcfff4;
  background: -webkit-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
  background: linear-gradient(to bottom, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
  border-radius: 50px;
  -webkit-transition: all 0.4s ease;
  transition: all 0.4s ease;
  box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.3);
}
.slideThree input[type=checkbox] {
  visibility: hidden;
}
.slideThree input[type=checkbox]:checked + label {
  left: 43px;
}

/* end .slideThree */
/* .roundedOne */
.roundedOne {
  width: 28px;
  height: 28px;
  position: relative;
  margin: 20px auto;
  background: #fcfff4;
  background: -webkit-linear-gradient(top, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
  background: linear-gradient(to bottom, #fcfff4 0%, #dfe5d7 40%, #b3bead 100%);
  border-radius: 50px;
  box-shadow: inset 0px 1px 1px white, 0px 1px 3px rgba(0, 0, 0, 0.5);
}


</style>
<!--       <script src="https://cloud.apizee.com/apiRTC/apiRTC-latest.min.js"></script> -->
<script type="text/javascript" src="rtc.js"></script>
    </head>
<body class="" style="" onload="fixHT()">
<div class="" style="background-image: url('img/map7.png'); background-size:cover; filter:blur(10px);position:absolute;top:0;left:0;width:100%;height:100%;overflow:none"></div>

	<!-- Document Wrapper
	============================================= -->
	<div id="wrapper" style="width:100%;background:#fff;overflow:hidden">
	<div style="width:100%;position:absolute;height:60px;top:0;left:0;background:#00D9D9" class="www_box7">
	Back <img style="margin:auto;height:40px;position:absolute;left:0;right:0;margin:auto;top:10px;display:" src="images/logo4.png">
	</div>
	<div style="width:100%;position:absolute;z-index:99999999999999999;height:70px;background:#f0f0f0;bottom:0px;left:0;margin:0;font-size:15px!Important">
	<span style="font-size:16px!Important;" id="status"></span><span style="font-size:16px!Important;" id="status2"></span></div>
		<!-- Header
		============================================= -->
		<div id="" class="" style="padding:20px;position:absolute;left:0;right:0;margin:auto!Important;top:50PX;height:225px;margin:auto;z-index:9;max-width:320px">
			<div style="font-size:24px;padding:5px;border-bottom:0px solid red;text-align:left" class="p1">MAKE A VIDEO CALL</div>
			<table style="width:320px;margin-left:-20px;margin-top:5px" class="www_box2">
				<tr>
					<td style="width:95px;padding:10px" 1title="Enter a login number or an email address of the person you wish to video chat with - and just press the button. Thats it. User offline? You also have the option of having us track down the user for you. Just choose 'yes' when asked." style="width:60px">

						<label>Dial</label>
						<span id="addressBook" style="font-size:18px;color:#000">
						  <img src="https://werrx.com/images/sp13.png" style="width:30px">
						</span>							
					</td>
					<td style="text-align:left;max-width:170px">
						<input type="text" id="patient_login" value=""  placeholder="Invite via Login or Email" style="padding:5px;width:150px;height:40px;border:1px solid skyblue;border-radius:4px;background:#fcfcfc" onblur="document.all.callVideo.src='https://sugardaddydays.com/assets/images/vcb.png'">
						<div id="addressBookDropDown" style="display:none;color:#000!Important;background:#f0f0f0;font-size:20px;width:170px;margin-top:-5px;border-radius:0 0 4px 4px"></div>
						<input type="hidden" id="encodedLogin">
					</td>
					<td>
						<img title="Click here to start a video call with anyone, just using their login name or email address" style="width:60px;margin:10px" id="callVideo" src="https://sugardaddydays.com/assets/images/vc.png">
						<span id="call"></span>
					</td>
				</tr>
			</table>
			<div style="font-size:1.1em"><span><img style="width:40px" src="https://sugardaddydays.com/assets/images/grr.png"></span><span>SETTINGS</span></div>
			<table style="width:320px;margin-left:-20px;margin-top:10px" class="www_box2">
				<tr>
					<td style="width:50px;padding:10px">
							<label>Audio</label>
					</td>
					<td style="text-align:left;max-width:250px">
						<select class="browser-default" id='audioSource' style="margin:5px;background:lavenderblush;border-radius:4px;max-width:200px;padding:5px;border:none;height:40px;font-size:20px;">
							<option value="" disabled selected>Default Mic</option>
						</select>
				
					</td>
					
				</tr>
				<tr>
					<td style="padding:10px">
						<label>Video</label>
					</td>
					<td>
						<select class="browser-default" id='videoSource' style="margin:5px;background:lavender;border-radius:4px;max-width:200px;padding:5px;border:none;height:40px;font-size:20px;">
							<option value="" disabled selected>Default Camera</option>
						</select>													
					</td>
				</tr>
				<tr>
					<td style="width:50px;padding:10px">
						<label>Resolution</label>
					</td>
					<td style="text-align:left;max-width:250px">
						<select class="browser-default" id='audioSource' style="margin:5px;background:lightblue;border-radius:4px;max-width:200px;padding:5px;border:none;height:40px;font-size:20px;">
							<option value="" selected>HD</option>
							<option value="" disabled>4K</option>
							<option value="" disabled>SD</option>
							<option value="" disabled>VGA</option>
							<option value="" disabled>QVGA</option>
						</select>
				
					</td>
				</tr>
				<tr>
					<td style="width:50px;padding:10px">
							<label>Bandwidth</label>
					</td>
					<td style="text-align:left;max-width:250px">
						<select class="browser-default" id='audioSource' style="margin:5px;background:gold;border-radius:4px;max-width:200px;padding:5px;border:none;height:40px;font-size:20px;">
							<option value="" selected>1200 KBps</option>
							<option value="" disabled>800 KBps</option>
							<option value="" disabled>300 KBps</option>
							<option value="" disabled>100 KBps</option>
						</select>
				
					</td>
					
				</tr>
				<tr>
					<td style="width:50px;padding:10px">
						<label>Source</label>
					</td>
					<td style="text-align:left;max-width:250px">
						<SPAN><a href="#"><image src="https://sugardaddydays.com/assets/images/t1a.png" id="mm" style="width:45px" data-toggle="modal" data-target="#modalRemote"></a><BR>REMOTE</SPAN><SPAN style="position:absolute;margin-left:25px;margin-top:-28px;text-align:center"><a href="#"><image src="https://sugardaddydays.com/assets/images/t1b.png" id="mr" style="width:25px" data-toggle="modal" data-target="#modalMini"></a><br>LOCAL</SPAN>
					</td>
				</tr>
			</table>
			<table style="width:350px;margin-left:-20px;margin-top:10px">
			<tr><td>
				<a href="#"><image src="images/tele_med.png"style="width:55px;display:none" data-toggle="modal" data-target="#modalAR" id="tm"></a>
				<a href="#"><image src="images/tele_med.png"style="width:55px;display:none" data-toggle="modal" data-target="#modalAlert" id="am"></a>
				<input id="hangup" class="btn btn-danger" type="button" disabled="true" value="Hangup" style="display:none"/>
			</td></tr>
		</table>
		
	</div></div>  
              </div>
            </div><!-- /.container -->
	</div>
<!-- #wrapper end -->
						<div class="modal fade" id="modalCalling" tabindex="-1" role="dialog" aria-labelledby="modalCallingLabel" aria-hidden="true" style="position:absolute;z-index:99999999999999999999999999;font-family:Poiret One!Important;font-size:24px!Important">
							<div class="modal-dialog">
								<div class="modal-body">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><img src="images/new_close.png" onclick="setStatus('Call Request Ended')"></button>
											<h4 class="modal-title" id="modalCallingLabel">Calling...</h4>
										</div>
										<div class="modal-body" id="callBody" style="width:100%;height:100%;object-fit:cover;padding:0;margin:0;text-align:center;display:block">
											<div><img src="images/phone_calling.gif" style="width:125px"></div>
											<div>Invite Sent.<br>Waiting for user...<br><br></div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="modal fade" id="modalRemote" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="position:absolute;z-index:99999999999999999999999999" onclick="goFullScreen()">
							<div class="modal-dialog">
								<div class="modal-body">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><img src="images/new_close.png"></button>
											<h4 class="modal-title" id="myModalLabel">REMOTE VIDEO STREAM</h4>
										</div>
										<div id="hangupButtons"></div>
										<div class="modal-body" id="remote" style="width:100%;height:100%;object-fit:cover;padding:0;margin:0;text-align:center">
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="modal fade" id="modalMini" tabindex="-1" role="dialog" aria-labelledby="miniModalLabel" aria-hidden="true" style="position:absolute;z-index:99999999999999999999999999">
							<div class="modal-dialog">
								<div class="modal-body">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><img src="images/new_close.png"></button>
											<h4 class="modal-title" id="miniModalLabel">MY LOCAL VIDEO STREAM</h4>
										</div>
										<div id="hangupButtons"></div>
										<div class="modal-body" id="mini" style="width:100%;height:100%;object-fit:cover;padding:0;margin:0;text-align:center">
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="modal fade" id="modalAR" tabindex="-1" role="dialog" aria-labelledby="pxDetailLabel" aria-hidden="true" style="position:absolute;z-index:99999999999999999999999999">
							<div class="modal-dialog">
								<div class="modal-body">
									<div class="modal-content" STYLE="TEXT-ALIGN:CENTER">
										<div class="modal-header" id="arBody">
											<button type="button" class="close" data-dismiss="modal" aria-hidden="true" id="closeNames"><img src="images/new_close.png" id="new_close"></button>
											<p class="modal-title" id="pxDetailLabel" style="color:orange;font-size:32px">INCOMING VIDEO CALL</p>
										</div>
										<div class="modal-body" id="accept_refuse">
											<input id="accept" class="btn btn-success" type="button" disabled="true" value="Accept Call"  style="font-size:24px"/>
											<input id="refuse" class="btn btn-danger" type="button" disabled="true" value="Refuse Call"  style="font-size:24px"/>
										</div>
									</div>
								</div>
							</div>
						</div>								
						<div class="modal fade" id="modalJMsg" tabindex="-1" role="dialog" aria-labelledby="msgHeader" aria-hidden="true" style="position:absolute;z-index:99999999999999999999999999">
							<div class="modal-dialog">
								<div class="modal-body">
									<div class="modal-content">
										<div id="jh" class="modal-header" style="padding:2px">
											<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><img style="margin:10px;margin-top:20px" src="images/new_close.png"></button>
											<div class="modal-title" id="msgHeader" style="font-size:24px;margin:10px!Important"></div>
										</div>
										<div class="modal-body" id="msgBody" style="width:100%;height:100%;object-fit:cover;padding:10px;margin:0">
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="modal fade" id="modalInvite" tabindex="-1" role="dialog" aria-labelledby="modelInviteLabel" aria-hidden="true" style="font-family:Poiret One!Important;font-size:24px!Important;overflow:auto!Important">
							<div class="modal-dialog">
								<div class="modal-body">
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal" aria-hidden="true"><img src="images/new_close.png"></button>
											<h4 class="modal-title" id="modelInviteLabel">Calling...</h4>
										</div>
										<div class="modal-body" id="inviteMethod" style="width:100%;height:100%;object-fit:cover;padding:0px;margin:0">
											<table style="font-family:Open Sans Condensed!Important">
												<tr class="www_box2">
													<td style="text-align:right">
														Email
													</td>
													<td>
														<div><input type="text" id="email" style="margin:10px;padding:5px;border-radius:4px;border:none;background:#ffffbf"></div>
													</td>
												</tr>
												<tr class="www_box2">
													<td style="text-align:right">
														Mobile
													</td>
													<td>
														<div><input type="text" id="mobile" style="margin:10px;padding:5px;border-radius:4px;border:none;background:#ffffbf"></div>
													</td>
												</tr>

												<tr class="www_box6 b1">
													<td style="width:100px">
														<div class="slideOne">  
														  <input type="checkbox" value="None" id="chkSMS" name="chkSMS" checked disabled />
														  <label for="chkSMS"></label>
														</div>
													</td>
													<td>
														Send SMS
													</td>
												</tr>
												<tr class="www_box6 b1" style="display:none">
													<td>
														<div class="slideOne">  
														  <input type="checkbox" onchange="setC(this)" value="None" id="chkSMSMsg" name="chkSMSMsg" />
														  <label for="chkSMSMsg"></label>
														</div>													</td>
													</td>
													<td>
														<div class="b1">Use personalized SMS Message (100 characters)</div>
														<div><textarea id="txtSMS" class="txtMsg"></textarea></div>
													</td>
												</tr>
												<tr class="www_box7 b1">
													<td style="width:100px">
														<div class="slideOne">  
														  <input type="checkbox" onchange="setC(this)" value="None" id="chkVoice" name="chkVoice" />
														  <label for="chkVoice"></label>
														</div>													</td>
													</td>
													<td>
														Make a voice call
													</td>
												</tr>
												<tr class="www_box7 b1" style="display:none">
													<td>
															<div class="slideOne">  
															  <input type="checkbox" onchange="setC(this)" value="None" id="chkVoiceMsg" name="chkVoiceMsg"/>
															  <label for="chkVoiceMsg"></label>
															</div>													</td>
													<td>
														<div>Use personalized voice message (500 characters)</div>
														<div><textarea id="txtVoice" class="txtMsg"></textarea></div>
													</td>
												</tr>
												<tr class="www_box9 b1" style="background:lightblue">
													<td>
														<div class="slideOne">  
														  <input type="checkbox" value="None" onchange="setC(this)"  id="chkEmail" name="chkEmail" />
														  <label for="chkEmail"></label>
														</div>													</td>
													<td>
														Send an Email
													</td>
												</tr>
												<tr class="www_box8 b1" style="display:none">
													<td style="width:100px">
															<div class="slideOne">  
															  <input type="checkbox" onchange="setC(this)" value="None" id="chkEmailMsg" name="chkEmailMsg" />
															  <label for="chkEmailMsg"></label>
															</div>
													<td>
														<div>Use personalized email message (2000 characters)</div>
														<div><textarea id="txtEmail" class="txtMsg"></textarea></div>
													</td>
												</tr>
												<tr class="www_box9 b1" STYLE="BACKGROUND:GOLD">
													<td style="width:100px">
															<div class="slideOne">  
															  <input type="checkbox" value="None" id="chkHunt" name="chkHunt"/>
															  <label for="chkHunt"></label>
															</div>
													</td>
													<td>
															HUNT MODE
  													</td>
												</tr>
												<tr>
													<td colspan=2 style="text-align:center;padding:5px;font-size:21px">
														<input type="button" value="Continue" onclick="go_next()" class="btn btn-warning">
													</td>
												</tr>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
		<!-- Go To Top
	============================================= -->
	<div id="gotoTop" class="icon-angle-up"></div>
	<!-- External JavaScripts
	============================================= -->
	<script type="text/javascript" src="js/jquery.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script type="text/javascript" src="js/plugins.js"></script>

<script>

    function refreshVideoView() {
        if ((typeof device !== "undefined") && device.platform == 'iOS'){
            console.log("REFRESH");
            cordova.plugins.iosrtc.refreshVideos();
        }
    }

    function incomingCallHandler(e) {
        $("#call").hide();
        $("#number").hide();
        $("#hangup").show();
        $('#status').hide();
        setTimeout(refreshVideoView,2000);
    }

    function hangupHandler(e) {
        $("#call").show();
        $("#number").show();
        $("#hangup").hide();
        $('#status').html(e.detail.reason);
        $('#status').show();
    }

    function userMediaErrorHandler(e) {
        $("#call").show();
        $("#number").show();
        $("#hangup").hide();
    }

    function remoteStreamAddedHandler(e) {
        refreshVideoView();
    }

    function sessionReadyHandler(e) {

        apiRTC.addEventListener("incomingCall", incomingCallHandler);
        apiRTC.addEventListener("userMediaError", userMediaErrorHandler);
        apiRTC.addEventListener("remoteStreamAdded", remoteStreamAddedHandler);
        apiRTC.addEventListener("hangup", hangupHandler);

        var webRTCClient = apiCC.session.createWebRTCClient({
            minilocalVideo : "myMiniVideo",
            remoteVideo : "myRemoteVideo"
        });

        $('#localNumber').html("Your local ID :<BR/>"+apiCC.session.apiCCId);
        $('#myMiniVideo').show();
        $('#status').hide();

        $("#call").click(function () {
            $("#call").hide();
            $("#number").hide();
            $("#hangup").show();
            $('#status').hide();

            destNumber = $("#number").val();
            console.log("send REFRESH");
            setTimeout(refreshVideoView,4000);
            webRTCClient.call(destNumber);
        });

        $("#hangup").click(function () {
            $("#call").show();
            $("#number").show();
            $("#hangup").hide();

            webRTCClient.hangUp();
        });
    }

    function onDeviceReady() {

        if ((typeof device !== "undefined") && device.platform == 'iOS'){
            cordova.plugins.iosrtc.registerGlobals();
        }


        if ((typeof device !== "undefined") && device.platform == 'Android'){
            var permissions = cordova.plugins.permissions;
            permissions.hasPermission(permissions.CAMERA, checkVideoPermissionCallback, null);
            permissions.hasPermission(permissions.RECORD_AUDIO, checkAudioPermissionCallback, null);

            function checkVideoPermissionCallback(status) {
                if(!status.hasPermission) {
                    var errorCallback = function() {
                        alert('Camera permission is not turned on');
                    }
                    permissions.requestPermission(
                            permissions.CAMERA,
                            function(status) {
                                if(!status.hasPermission) {
                                    errorCallback();
                                }
                            },
                            errorCallback);
                }
            }

            function checkAudioPermissionCallback(status) {
                if(!status.hasPermission) {
                    var errorCallback = function() {
                        alert('Audio permission is not turned on');
                    }
                    permissions.requestPermission(
                            permissions.RECORD_AUDIO,
                            function(status) {
                                if(!status.hasPermission) {
                                    errorCallback();
                                }
                            },
                            errorCallback);
                }
            }
        }

        apiRTC.init({
            //apiCCId : "12", // Your can overide your number
            onReady: sessionReadyHandler,
            apiKey : "myDemoApiKey"
        });

    }

    var app = document.URL.indexOf( 'https://' ) === -1;
    if ( app ) {
        document.addEventListener("deviceready", onDeviceReady, false);
    } else {
        onDeviceReady();
    }
</script>
</body>
</html>